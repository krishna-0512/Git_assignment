name: Secrets and Env Workflow

on:
  push:
    branches:
      - master
      - main
  workflow_dispatch:

jobs:
  run-job:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set SERVICE_URL environment variable
        # this writes SERVICE_URL into $GITHUB_ENV for later steps
        run: echo "SERVICE_URL=https://example.com" >> $GITHUB_ENV

      - name: Show secret and env var (masked)
        run: |
          echo "Printing masked secret (should be masked by GitHub):"
          echo "API_KEY is ${{ secrets.API_KEY }}"
          echo "Printing SERVICE_URL from GITHUB_ENV:"
          echo "Service URL is $SERVICE_URL"
